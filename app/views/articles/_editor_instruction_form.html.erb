<div class="row-fluid" id="instruction">
  <% article = f.object %>
  <% if edit %>
  <% else %>
  <div class="span1"></div>
  <div id="assign-issue" style="margin-left:0;" class="span7">
    <div class="row-fluid">
      <% if editor then %>
      <%= f.hidden_field :editor_id, value: editor %>
      <% elsif contributor then %>
      <%= f.hidden_field :contributor_id, value: contributor %>
      <% end %>
      <div class="row-fluid">
	  <% if !@assigned_contributor_name.present? %>
	    <div class="span6" id="contributor_container" style="margin-top:20px;display:none;"></div>
	    <div class="span6"  id="remove_contributor_button_container" style="display:none;margin-top:20px;">
	  <% else %>
	    <div class="span6" id="contributor_container">
	      <%= @assigned_contributor_name %></div>
	    <div class="span6" id="remove_contributor_button_container">
	  <% end %>
	    <%= link_to "Remove", "#", id: 'remove_contributor', class: 'btn little-up' %>
	    </div>
	</div>
	<div class="row-fluid">
	  <% if editor then %>
	  <% if !@assigned_contributor_name.present? %>
	  <div class="span12" id="contributor_query">
	    <% else %>
	  <div class="span12" id="contributor_query" style="display:none;">
	    <% end %>
	    <%= f.hidden_field :searched_contributor_id, id: "searched_contributor_id" %>
	    <%= f.hidden_field :contributor_id, id: "contributor_id" %>
	    <% if @article.errors.any? %>
	    <% contains = false %>  
	    <% @article.errors.full_messages.each do |msg| %>
	    <% if msg.include? "contributor" then %>
	    <% contains = true %>
	    <% end %>
	    <% end %>
	    <% end %>
	    <% if contains %>
	    <div class="field_with_errors" >
	      <% end %>
	    <%= f.autocomplete_field :contributor_last_name,  autocomplete_contributor_last_name_articles_path, class:"little-further-down span6", placeholder: "Contributor(Search by last name)", :id_element =>'#searched_contributor_id' %>
	    <span class="down" style="float:right;">
	      <% if contains %>
	      </div>
	    <% end %>
	    <%= link_to "Set", "#", id: 'set_contributor', class: 'btn'%>
	    &nbsp;&nbsp;OR&nbsp;&nbsp; 
	    <%= link_to "Assign Random", assign_random_path, id:'assign_random_contributor', method: :post, remote: true, class: 'btn'%>
	    <%= link_to raw("<i class='icon-question-sign'></i>"), "#",  class: 'show_tip', data: {tip: "Find a contributor by typing in his last name. You need to press the set button to actually assign this article to the found contributor."} %>
	    </span>
	  </div>
	  <% end %>
	</div>
	<div class="row-fluid">
	  <div class="span12" style="display:none;" id="contributor_error">Select a contributor from the search result.
	  </div>
	</div>
	<div class="row-fluid">
	    <%= f.text_field :temporary_title, :size => 80, maxlength: 80, placeholder: "Enter temporary title(issue) here", class: "span11-5" %>
	    <span style="float:right;">
	      <%= link_to raw("<i class='icon-question-sign'></i>"), "#",  class: 'show_tip', data: {tip: "enter a temporary title for the article."} %>
	    </span>
	</div>
	<div class="row-fluid">
	  <%= f.text_area :instruction, rows: 15, class:"input-xxlarge span11-5", placeholder: "instructions for the article" %>
	  <span style="float:right;">
	    <%= link_to raw("<i class='icon-question-sign'></i>"), "#",  class: 'show_tip', data: {tip: "Write an instruction for the contributor. What kind of approach should the contributor take?"} %>
	  </span>
	</div>
    </div>
  </div>
  <div class="span1"></div>
  <div class="span3" style="margin-left:0;">
    <div class="row-fluid down">
      <div id="tags" class="span12">
	<div class="postbox center">
	  <h3>Article Category<%= link_to raw("<i class='icon-question-sign'></i>"), "#",  class: 'show_tip', data: {tip: "Select the most relevant category for the article."} %></h3>
	  <div class="down inside">
	    <% if f.object.category.nil? then %>
	    <%= f.select :category, options_for_select(list_of_categories), class:"input-country down" %>
	    <% else %>
	    <%= f.select :category, options_for_select(list_of_categories, f.object.category), class: "input-country down" %>
	    <% end %>
	  </div>
	</div>
      </div>
    </div>

    <div class="row-fluid down">
      <div id="tags" class="span12">
	<div class="postbox center">
	  <h3>Issue Tag<%= link_to raw("<i class='icon-question-sign'></i>"), "#",  class: 'show_tip', data: {tip: "Enter a specific tag that will be used to find articles with the same topic."} %></h3>
	  <div>
	    <div id="issue-container" class="row-fluid down inside" style="display:none;">
	      <strong><em id="issue"></em></strong>
	      <%= link_to "Remove", "#", id: 'remove_issue', class: 'btn'%>
	    </div>
	    <div id="issue-search-container" class="row-fluid down inside">
	      <%= f.hidden_field :issue_list %>
	      <% if @article.errors.any? %>
	      <% contains = false %>  
	      <% @article.errors.full_messages.each do |msg| %>
	      <% if msg.include? "issue" then %>
	      <% contains = true %>
	      <% end %>
	      <% end %>
	      <% end %>
	      <% if contains %>
	      <div class="field_with_errors" >
		<% end %>
	      <%= autocomplete_field_tag "throwaway-issue", "",  autocomplete_issue_name_articles_path, :multiple=> false, class:"input-tag", placeholder: "search for a tag" %>
	      <% if contains %>
	      </div>
	      <% end %>
	      <%= button_tag "Set", class: 'btn up', type: 'button', id: 'add_issue_tag_button' %>
	    </div>
	  </div>
	</div>
      </div>
    </div>
    <div class="row-fluid down">
      <div id="tags" class="span12">
	<div class="postbox center">
	  <h3>General Tags<%= link_to raw("<i class='icon-question-sign'></i>"), "#",  class: 'show_tip', data: {tip: "Enter general tags you want associated with this article."} %></h3>
	  <div class="down inside">
	    <%= f.hidden_field :tag_list %>
	    <%= autocomplete_field_tag "throwaway", "",  autocomplete_tag_name_articles_path, 'data-delimiter' => ', ', :multiple=> true, class:"little-further-down input-tag", placeholder: "search for tags" %>
	    <%= button_tag "Add", class: 'btn', type: 'button', id: 'add_tag_button' %>
	  </div>
	  <div id="tag_icons" style="min-height:0px;">
	  </div>
	</div>
      </div>
    </div>

  </div>
  <% end %>



